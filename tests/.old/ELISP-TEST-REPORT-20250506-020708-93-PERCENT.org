#+TITLE: Elisp Test Report
#+AUTHOR: ywatanabe
#+DATE: 2025-05-06 02:07:11 Created by https://github.com/ywatanabe1989/emacs-test

* Test Results Summary

- Passed: 69
- Failed: 5
- Skipped: 0
- Timeout (= 10 s): 0
- Duplicates: 0
- Total: 74
- Total Time: 2.34 seconds
- Success Rate: 93.2%

* Passed Tests (74)
** test-emacs-claude-code-copy-repository.el (10 tests)
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-code-copy-repository-loadable][test-emacs-claude-code-copy-repository-loadable]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-repository-dir-defined][test-emacs-claude-repository-dir-defined]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-repository-output-file-defined][test-emacs-claude-repository-output-file-defined]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-file-blacklist-defined][test-emacs-claude-file-blacklist-defined]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-max-file-size-defined][test-emacs-claude-max-file-size-defined]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-blacklisted-p-functionality][test-emacs-claude-blacklisted-p-functionality]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-get-file-type-functionality][test-emacs-claude-get-file-type-functionality]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-get-file-content][test-emacs-claude-get-file-content]]
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-get-repository-files-with-mock-dir][test-emacs-claude-get-repository-files-with-mock-dir]]
  + Error details:
    Selector: test-emacs-claude-get-repository-files-with-mock-dir
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:09+1000
    Finished.
    Finished at:  2025-05-06 02:07:09+1000
    
    F
    
    F test-emacs-claude-get-repository-files-with-mock-dir
        (ert-test-failed
         ((should (member elisp-file files)) :form
          (member "/tmp/emacs-claude-test-dir-2Kg8np/test.el" nil) :value nil))
    
    
    
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-copy-repository-creates-output-file][test-emacs-claude-copy-repository-creates-output-file]]
  + Error details:
    Selector: test-emacs-claude-copy-repository-creates-output-file
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:09+1000
    Finished.
    Finished at:  2025-05-06 02:07:09+1000
    
    F
    
    F test-emacs-claude-copy-repository-creates-output-file
        (ert-test-failed
         ((should
           (string-match-p (regexp-quote "(defun test () (message \"test\"))")
                           kill-content))
          :form
          (string-match-p "(defun test () (message \"test\"))"
                          "# Repository Structure\n\n")
          :value nil))
    
    
    
** test-emacs-claude-code-detect-prompt.el (10 tests)
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-code-detect-prompt-loadable][test-emacs-claude-code-detect-prompt-loadable]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-waiting-defined][test-emacs-claude-detect-prompt-waiting-defined]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-initial-waiting-defined][test-emacs-claude-detect-prompt-initial-waiting-defined]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-y/n-defined][test-emacs-claude-detect-prompt-y/n-defined]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-y/y/n-defined][test-emacs-claude-detect-prompt-y/y/n-defined]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-defined][test-emacs-claude-detect-prompt-defined]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-with-mock-buffer][test-emacs-claude-detect-prompt-with-mock-buffer]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-handles-nil-buffer][test-emacs-claude-detect-prompt-handles-nil-buffer]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-detect-prompt-returns-nil-when-not-found][test-emacs-claude-detect-prompt-returns-nil-when-not-found]]
- [[file:test-emacs-claude-code-detect-prompt.el::test-emacs-claude-y/n-prompt-detection][test-emacs-claude-y/n-prompt-detection]]
** test-emacs-claude-code-run.el (11 tests)
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-code-run-loadable][test-emacs-claude-code-run-loadable]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-prompt-template-defined][test-emacs-claude-prompt-template-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-default-instructions-defined][test-emacs-claude-default-instructions-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-ensure-buffer-defined][test-emacs-claude-ensure-buffer-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-defined][test-emacs-claude-run-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-on-region-defined][test-emacs-claude-run-on-region-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-on-buffer-defined][test-emacs-claude-run-on-buffer-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-quick-defined][test-emacs-claude-run-quick-defined]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-formats-prompt-correctly][test-emacs-claude-run-formats-prompt-correctly]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-on-region-extracts-region-content][test-emacs-claude-run-on-region-extracts-region-content]]
- [[file:test-emacs-claude-code-run.el::test-emacs-claude-run-on-buffer-extracts-buffer-content][test-emacs-claude-run-on-buffer-extracts-buffer-content]]
** test-emacs-claude-code-send.el (9 tests)
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-code-send-loadable][test-emacs-claude-code-send-loadable]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-code-send-defined][test-emacs-claude-code-send-defined]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-auto-send-y-defined][test-emacs-claude-auto-send-y-defined]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-auto-send-yy-defined][test-emacs-claude-auto-send-yy-defined]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-auto-send-continue-defined][test-emacs-claude-auto-send-continue-defined]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-auto-send-y-sends-correct-response][test-emacs-claude-auto-send-y-sends-correct-response]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-auto-send-yy-sends-correct-response][test-emacs-claude-auto-send-yy-sends-correct-response]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-auto-send-continue-sends-correct-response][test-emacs-claude-auto-send-continue-sends-correct-response]]
- [[file:test-emacs-claude-code-send.el::test-emacs-claude-code-send-routes-to-correct-handler][test-emacs-claude-code-send-routes-to-correct-handler]]
** test-emacs-claude-code-start-stop.el (11 tests)
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-start-stop-loadable][test-emacs-claude-code-start-stop-loadable]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-toggle-defined][test-emacs-claude-code-toggle-defined]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-toggle-starts-when-inactive][test-emacs-claude-code-toggle-starts-when-inactive]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-toggle-stops-when-active][test-emacs-claude-code-toggle-stops-when-active]]
  + Error details:
    Selector: test-emacs-claude-code-toggle-stops-when-active
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:10+1000
    Finished.
    Finished at:  2025-05-06 02:07:10+1000
    
    F
    
    F test-emacs-claude-code-toggle-stops-when-active
        (ert-test-failed ((should-not started) :form started :value t))
    
    
    
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-rename-buffer-when-enabled][test-emacs-claude-code-rename-buffer-when-enabled]]
  + Error details:
    Selector: test-emacs-claude-code-rename-buffer-when-enabled
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:10+1000
    Finished.
    Finished at:  2025-05-06 02:07:10+1000
    
    F
    
    F test-emacs-claude-code-rename-buffer-when-enabled
        (ert-test-failed
         ((should (string= (buffer-name mock-buffer) emacs-claude-buffer-name))
          :form (string= "*CLAUDE-CODE*<2>" "*CLAUDE-CODE*") :value nil
          :explanation
          (arrays-of-different-length 16 13 "*CLAUDE-CODE*<2>" "*CLAUDE-CODE*"
                                      first-mismatch-at 13)))
    
    
    
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-rename-buffer-when-disabled][test-emacs-claude-code-rename-buffer-when-disabled]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-start-uses-current-buffer-when-no-buffer-exists][test-emacs-claude-code-start-uses-current-buffer-when-no-buffer-exists]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-start-adds-hook-and-starts-timer][test-emacs-claude-code-start-adds-hook-and-starts-timer]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-stop-removes-hook-and-cancels-timer][test-emacs-claude-code-stop-removes-hook-and-cancels-timer]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-check-and-restart-adds-hook-when-missing][test-emacs-claude-code-check-and-restart-adds-hook-when-missing]]
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed][test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed]]
  + Error details:
    Selector: test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:10+1000
    Finished.
    Finished at:  2025-05-06 02:07:10+1000
    
    F
    
    F test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed
        (ert-test-failed
         ((should (eq emacs-claude-buffer 'mock-vterm-buffer)) :form
          (eq nil mock-vterm-buffer) :value nil))
    
    
    
** test-emacs-claude-code-update-mode-line.el (8 tests)
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-loadable][test-emacs-claude-code-update-mode-line-loadable]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-mode-line-indicator-defined][test-emacs-claude-code-mode-line-indicator-defined]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-defined][test-emacs-claude-code-update-mode-line-defined]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-adds-indicator][test-emacs-claude-code-update-mode-line-adds-indicator]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-removes-indicator][test-emacs-claude-code-update-mode-line-removes-indicator]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-adds-overlay][test-emacs-claude-code-update-mode-line-adds-overlay]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-removes-overlay][test-emacs-claude-code-update-mode-line-removes-overlay]]
- [[file:test-emacs-claude-code-update-mode-line.el::test-emacs-claude-code-update-mode-line-force-updates][test-emacs-claude-code-update-mode-line-force-updates]]
** test-emacs-claude-code-variables.el (7 tests)
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-code-variables-loadable][test-emacs-claude-code-variables-loadable]]
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-code-variables-customization-group][test-emacs-claude-code-variables-customization-group]]
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-buffer-name-defined][test-emacs-claude-buffer-name-defined]]
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-buffer-defined][test-emacs-claude-buffer-defined]]
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-code-timer-defined][test-emacs-claude-code-timer-defined]]
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-prompt-patterns-defined][test-emacs-claude-prompt-patterns-defined]]
- [[file:test-emacs-claude-code-variables.el::test-emacs-claude-code-interval-sec-defined][test-emacs-claude-code-interval-sec-defined]]
** test-emacs-claude-code.el (8 tests)
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-loadable][test-emacs-claude-code-loadable]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-variables-required][test-emacs-claude-code-variables-required]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-detect-prompt-required][test-emacs-claude-code-detect-prompt-required]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-send-required][test-emacs-claude-code-send-required]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-update-mode-line-required][test-emacs-claude-code-update-mode-line-required]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-start-stop-required][test-emacs-claude-code-start-stop-required]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-run-required][test-emacs-claude-code-run-required]]
- [[file:test-emacs-claude-code.el::test-emacs-claude-code-copy-repository-required][test-emacs-claude-code-copy-repository-required]]
* Failed Tests (5)
** test-emacs-claude-code-copy-repository.el (2 tests)
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-get-repository-files-with-mock-dir][test-emacs-claude-get-repository-files-with-mock-dir]]
  + Error details:
    Selector: test-emacs-claude-get-repository-files-with-mock-dir
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:09+1000
    Finished.
    Finished at:  2025-05-06 02:07:09+1000
    
    F
    
    F test-emacs-claude-get-repository-files-with-mock-dir
        (ert-test-failed
         ((should (member elisp-file files)) :form
          (member "/tmp/emacs-claude-test-dir-2Kg8np/test.el" nil) :value nil))
    
    
    
- [[file:test-emacs-claude-code-copy-repository.el::test-emacs-claude-copy-repository-creates-output-file][test-emacs-claude-copy-repository-creates-output-file]]
  + Error details:
    Selector: test-emacs-claude-copy-repository-creates-output-file
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:09+1000
    Finished.
    Finished at:  2025-05-06 02:07:09+1000
    
    F
    
    F test-emacs-claude-copy-repository-creates-output-file
        (ert-test-failed
         ((should
           (string-match-p (regexp-quote "(defun test () (message \"test\"))")
                           kill-content))
          :form
          (string-match-p "(defun test () (message \"test\"))"
                          "# Repository Structure\n\n")
          :value nil))
    
    
    
** test-emacs-claude-code-start-stop.el (3 tests)
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-toggle-stops-when-active][test-emacs-claude-code-toggle-stops-when-active]]
  + Error details:
    Selector: test-emacs-claude-code-toggle-stops-when-active
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:10+1000
    Finished.
    Finished at:  2025-05-06 02:07:10+1000
    
    F
    
    F test-emacs-claude-code-toggle-stops-when-active
        (ert-test-failed ((should-not started) :form started :value t))
    
    
    
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-rename-buffer-when-enabled][test-emacs-claude-code-rename-buffer-when-enabled]]
  + Error details:
    Selector: test-emacs-claude-code-rename-buffer-when-enabled
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:10+1000
    Finished.
    Finished at:  2025-05-06 02:07:10+1000
    
    F
    
    F test-emacs-claude-code-rename-buffer-when-enabled
        (ert-test-failed
         ((should (string= (buffer-name mock-buffer) emacs-claude-buffer-name))
          :form (string= "*CLAUDE-CODE*<2>" "*CLAUDE-CODE*") :value nil
          :explanation
          (arrays-of-different-length 16 13 "*CLAUDE-CODE*<2>" "*CLAUDE-CODE*"
                                      first-mismatch-at 13)))
    
    
    
- [[file:test-emacs-claude-code-start-stop.el::test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed][test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed]]
  + Error details:
    Selector: test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed
    Passed:  0
    Failed:  1 (1 unexpected)
    Skipped: 0
    Total:   1/1
    
    Started at:   2025-05-06 02:07:10+1000
    Finished.
    Finished at:  2025-05-06 02:07:10+1000
    
    F
    
    F test-emacs-claude-code-check-and-restart-finds-vterm-buffer-when-needed
        (ert-test-failed
         ((should (eq emacs-claude-buffer 'mock-vterm-buffer)) :form
          (eq nil mock-vterm-buffer) :value nil))
    
    
    
