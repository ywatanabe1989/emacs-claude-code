<!-- ---
!-- Timestamp: 2025-05-11 14:53:07
!-- Author: ywatanabe
!-- File: /home/ywatanabe/.claude/guidelines/guidelines_project_management_rules.md
!-- --- -->

## Project Planning Rules
Original project plan should be located at `./project_management/ORIGINAL_PLAN.md`
- Usually, this original plan file is created by me. DO NOT EDIT THIS FILE.
- However, if I explicitly ask you to revise, please update and create a new file with version suffix: 
  - e.g, `./project_management/CLAUDE_UPDATED_PLAN_v01.md`

## Contents of Plans
1. Project Description
2. Goals - What is the project for?
3. Milestones - Checkpoints to ultimately achieve goals
4. Tasks - Small steps to achieve each milestone
and more

## Next Steps File as a persistent memory
Use this file for memory across sessions: `./project_management/next_steps.md`

## Project Management Progress Rules
- Direction of the project is managed under `./project_management`:
  - `./project_management/progress.md`
    - Main progress management file. You should update this as project advances.
    - Use tags:
      - TODO
        - Format: [ ] contents
        - For contents that need to be addressed or completed.
      - DONE
        - Format: [x] contents
        - Fill checkbox
        - For contents that have been completed (considered as done by agents).
      - JUSTIFICATION
        - Format: __justification__ | contents
        - References to justify why you determine the contents are DONE
      - ACCEPTED: 
        - Format: __accepted__ | contents
        - For contents accepted by the user.
        - Note: Only users can add or remove this tag.
      - REJECTED:
        - Format: ~~contents~~
        - For contents rejected by the user.
        - Note: Only users can add or remove this tag.
      - SUGGESTION
        - Format: __suggestions__ | contents
        - For contents suggested by agents.


- Supporting files:
  - `./project_management/progress.mmd`
    - Mermaid diagram definition reflecting the current progress (`./project_management/progress.md`)
    - Use tags as well
    - Use TD format
    - Understand the hierarchy and summarize into core elements
    - Too much of details may not be meaningful for visual challenges

  - `./project_management/progress.svg`
    - SVG file created from the mermaid file

  - `./project_management/progress.gif`
    - GIF image created from the SVG file

  - `./project_management/ORIGINAL_PLAN.md`
    - Original plan created by the user
    - DO NOT EDIT THIS FILE

  - `./project_management/next_steps.md`
    - Update this file to keep track of your thoughts across session

## Project Management Progress format

``` org
# +TITLE: Title
# +AUTHOR: ywatanabe
# +DATE: 2025-02-10 14:52:36
# +FILE: path to this file

* Title

| Type | Stat | Description       | User |
|------|------|-------------------|------|
| ðŸš€ T | [x]  | Potential Title 1 | ðŸ‘ A |
|------|------|-------------------|------|
| ðŸš€ T | [ ]  | Potential Title 2 | ðŸ‘€ T |


* Goals, Milestones, and Tasks

** ðŸŽ¯ Goal 1: Description

| Type | Stat | Description                           | User |
|------|------|---------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Accepted but not completed Goal       | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ M | [ ]  | Accepted but not completed Milestone  | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ“‹ T | [x]  | Accepted and completed Task           | ðŸ‘ A |
|      | [x]  | ðŸ“Š `/path/to/data_file.ext`           | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ“‹ T | [x]  | Not confirmed but completed Task      | ðŸ‘€ T |
|      | [x]  | ðŸ“Œ `/path/to/human_readable_file.ext` | ðŸ‘€ T |
|------|------|---------------------------------------|------|
| ...  |      |                                       |      |


** ðŸŽ¯ Goal 2: Description

| Type | Stat | Description                           | User |
|------|------|---------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Goal 2                                | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ M | [x]  | Milestone 1                           | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ“‹ T | [x]  | Task 1                                | ðŸ‘ A |
|      | [x]  | ðŸ“Œ `/path/to/human_readable_file.ext` | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ...  |      |                                       |      |


** ðŸŽ¯ Goal 3: Description

| Type | Stat | Description             | User |
|------|------|-------------------------|------|
| ðŸŽ¯ G | [ ]  | Unrealistic Goal 3      | âŒ R |
|------|------|-------------------------|------|
| ðŸ M | [ ]  | Unrealistic Milestone 1 | âŒ R |
|------|------|-------------------------|------|
| ðŸ“‹ T | [ ]  | Unrealistic Task 1      | âŒ R |
|------|------|-------------------------|------|
| ðŸ“‹ T | [ ]  | Unrealistic Task 2      | âŒ R |
|------|------|-------------------------|------|
| ...  |      |                         |      |

* Introduction

| Type | Stat | Description  | Direction | User |
|------|------|--------------|-----------|------|
| ðŸ”Ž H | [ ]  | Hypothesis 1 | H -> D    | ðŸ‘ A |
|------|------|--------------|-----------|------|
| ðŸ”Ž H | [ ]  | Hypothesis 2 | D -> H    | ðŸ‘€ T |
|------|------|--------------|-----------|------|
| ...  |      |              |           |      |

* Methods

** Data

| Type | Stat | Description | User |
|------|------|-------------|------|
| ðŸ“Šï¸ D | [x]  | Data 1      | ðŸ‘ A |
|------|------|-------------|------|
| ðŸ“Š D | [ ]  | Data 2      | âŒ R |
|------|------|-------------|------|
| ðŸ“Šï¸ D | [ ]  | Data 3      | ðŸ‘€ T |
| ...  |      |             |      |

** Tools

| Type | Stat | Description | User |
|------|------|-------------|------|
| ðŸ› ï¸ T | [x]  | Tool 1      | ðŸ‘ A |
|------|------|-------------|------|
| ðŸ› ï¸ T | [ ]  | Tool 2      | âŒ R |
|------|------|-------------|------|
| ðŸ› ï¸ T | [ ]  | Tool 3      | ðŸ‘€ T |
| ...  |      |             |      |


* Suggestions from Agents

| Type | Stat | Description  | User |
|------|------|--------------|------|
| ðŸ’¡ S | [ ]  | Suggestion 1 | ðŸ‘€ T |
|------|------|--------------|------|
| ðŸ’¡ S | [ ]  | Suggestion 2 | ðŸ‘€ T |
|------|------|--------------|------|
| ðŸ’¡ S | [ ]  | Suggestion 3 | ðŸ‘€ T |
| ...  |      |              |      |

* Legend
 
| **Type** | **Meaning**               | **Status** | **Meaning** | **User Status** | **Meaning** |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸš€ T   | Title                   | [ ]      | TODO      | ðŸ‘€ T          | To see    |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ”Ž H   | Hypothesis              | [x]      | DONE      | âŒ R          | Rejected  |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸŽ¯ G   | Goal                    |          |           | ðŸ‘ A          | Accepted  |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ M   | Milestone               |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“‹ T   | Task                    |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ› ï¸ T   | Tool (as Justification) |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“Š D   | Data (as Justification) |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“Œ J   | File as Justification   |          |           |               |           |

# EOF
```

### Progress Format
```
* Title

| Type | Stat | Description       | User |
|------|------|-------------------|------|
| ðŸš€ T | [x]  | Potential Title 1 | ðŸ‘ A |
|------|------|-------------------|------|
| ðŸš€ T | [ ]  | Potential Title 2 | ðŸ‘€ T |

* Goals, Milestones, and Tasks

** ðŸŽ¯ Goal 1: Description

| Type | Stat | Description                           | User |
|------|------|---------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Accepted but not completed Goal       | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ M | [ ]  | Accepted but not completed Milestone  | ðŸ‘ A |
|------|------|---------------------------------------|------|
| ðŸ“‹ T | [x]  | Accepted and completed Task           | ðŸ‘ A |
|      | [x]  | ðŸ“Š `/path/to/data_file.ext`           | ðŸ‘ A |
```

### Legend for Project Management
```
| **Type** | **Meaning**               | **Status** | **Meaning** | **User Status** | **Meaning** |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸš€ T   | Title                   | [ ]      | TODO      | ðŸ‘€ T          | To see    |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ”Ž H   | Hypothesis              | [x]      | DONE      | âŒ R          | Rejected  |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸŽ¯ G   | Goal                    |          |           | ðŸ‘ A          | Accepted  |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ M   | Milestone               |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“‹ T   | Task                    |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ› ï¸ T   | Tool (as Justification) |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“Š D   | Data (as Justification) |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“Œ J   | File as Justification   |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ’¡ S   | Suggestion              |          |           |               |           |
```


## Project Management Progress Example

``` org
# +TITLE: MNIST Digit Classification Project
# +AUTHOR: ywatanabe
# +DATE: 2025-02-10 14:52:36
# +FILE: /home/ywatanabe/proj/llemacs/resources/prompts/components/examples/mgmt-progress.org

* Title

| Type | Stat | Description                        | User |
|------|------|------------------------------------|------|
| ðŸš€ T | [x]  | *mnist digit clf*                  | ðŸ‘ A |
|------|------|------------------------------------|------|
| ðŸš€ T | [ ]  | *MNIST Digit Classification Project* | ðŸ‘ A |


* Goals, Milestones, and Tasks

** ðŸŽ¯ Goal 1: Prepare and Preprocess Data

| Type | Stat | Description                                  | User |
|------|------|----------------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Prepare and Preprocess Data                  | ðŸ‘ A |
|------|------|----------------------------------------------|------|
| ðŸ M | [x]  | Acquire MNIST Dataset                        | ðŸ‘ A |
|------|------|----------------------------------------------|------|
| ðŸ“‹ T | [x]  | Download MNIST training and testing datasets | ðŸ‘ A |
|      | [x]  | ðŸ“Š ./data/mnist/                             | ðŸ‘ A |
|------|------|----------------------------------------------|------|
| ðŸ M | [ ]  | Preprocess and Augment Data                  | ðŸ‘€ T |
|------|------|----------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Normalize pixel values                       | ðŸ‘€ T |
|      | [ ]  | ðŸ“Œ ./scripts/mnist/normalization.py          | ðŸ‘€ T |
|------|------|----------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Reshape and format data for model input      | ðŸ‘€ T |
|      | [ ]  | ðŸ“Œ ./scripts/mnist/reshape.py                | ðŸ‘€ T |
|------|------|----------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Perform data augmentation techniques         | ðŸ‘€ T |
|      | [ ]  | ðŸ“Œ ./scripts/mnist/data_augmentation.py      | ðŸ‘€ T |

** ðŸŽ¯ Goal 2: Develop and Train Baseline CNN Model

| Type | Stat | Description                                                    | User |
|------|------|----------------------------------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Develop and Train Baseline CNN Model                           | ðŸ‘ A |
|------|------|----------------------------------------------------------------|------|
| ðŸ M | [x]  | Design CNN architecture                                        | ðŸ‘ A |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [x]  | Define the number of layers and filters                        | ðŸ‘ A |
|      | [x]  | ðŸ“Œ Configuration in `./config/cnn_config.yaml`                 | ðŸ‘ A |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [x]  | Select activation functions and pooling strategies             | ðŸ‘ A |
|      | [x]  | ðŸ“Œ Details in `./config/cnn_config.yaml`                       | ðŸ‘ A |
|------|------|----------------------------------------------------------------|------|
| ðŸ M | [ ]  | Implement the CNN model in code                                | ðŸ‘€ T |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Code the model using Keras API                                 | ðŸ‘€ T |
|      | [ ]  | ðŸ“Œ Code to be written in `./models/cnn_model.py`               | ðŸ‘€ T |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Compile the model with appropriate optimizer and loss function | ðŸ‘€ T |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Train the model on preprocessed MNIST training data            | ðŸ‘€ T |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Set training parameters (epochs, batch size)                   | ðŸ‘€ T |
|------|------|----------------------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Monitor training progress and adjust as necessary              | ðŸ‘€ T |

** ðŸŽ¯ Goal 3: Evaluate Model Performance

| Type | Stat | Description                                         | User |
|------|------|-----------------------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Evaluate Model Performance                          | ðŸ‘ A |
|------|------|-----------------------------------------------------|------|
| ðŸ M | [ ]  | Test the model on MNIST testing data                | ðŸ‘€ T |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Calculate accuracy and loss on test set             | ðŸ‘€ T |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Generate confusion matrix and classification report | ðŸ‘€ T |


** ðŸŽ¯ Goal 4: Improve Model Accuracy and Generalization

| Type | Stat | Description                                             | User |
|------|------|---------------------------------------------------------|------|
| ðŸŽ¯ G | [ ]  | Improve Model Accuracy and Generalization               | ðŸ‘ A |
|------|------|-----------------------------------------------------|------|
| ðŸ M | [ ]  | Apply Additional Data Augmentation Techniques           | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Implement random rotations, shifts, and flips           | ðŸ’¡ S |
|      | [ ]  | ðŸ“Œ Enhances model robustness to variations | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Retrain the model with augmented data                   | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ M | [ ]  | Perform Hyperparameter Tuning                           | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Adjust learning rates, batch sizes, and optimizer types | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Use techniques like grid search or random search        | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ M | [ ]  | Implement Regularization Methods                        | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Add dropout layers to prevent overfitting               | ðŸ’¡ S |
|------|------|-----------------------------------------------------|------|
| ðŸ“‹ T | [ ]  | Apply L1/L2 regularization to weights                   | ðŸ’¡ S |

* Introduction

| Type | Stat | Description                                                                                  | User |
|------|------|----------------------------------------------------------------------------------------------|------|
| ðŸ”Ž H | [ ]  | Implementing a CNN will achieve over 99% accuracy on MNIST.                                  | ðŸ‘€ T |
|------|------|----------------------------------------------------------------------------------------------|------|
| ðŸ”Ž H | [ ]  | Applying data preprocessing and augmentation will improve model accuracy and generalization. | ðŸ‘€ T |

* Methods

** Tools

| Type | Stat | Description                                       | User |
|------|------|---------------------------------------------------|------|
| ðŸ› ï¸ T  | [x]  | Python programming language.                      | ðŸ‘ A |
|------|------|---------------------------------------------------|------|
| ðŸ› ï¸ T  | [x]  | TensorFlow and Keras libraries for deep learning. | ðŸ‘ A |
|------|------|---------------------------------------------------|------|
| ðŸ› ï¸ T  | [ ]  | GPU resources for accelerated training.           | ðŸ‘€ T |

* Suggestions from Agents

| Type | Stat | Description                                                                                   | User |
|------|------|-----------------------------------------------------------------------------------------------|------|
| ðŸ’¡ S | [ ]  | Experiment with batch normalization layers to improve training speed and stability.           | ðŸ‘€ T |
|------|------|-----------------------------------------------------------------------------------------------|------|
| ðŸ’¡ S | [ ]  | Try deeper network architectures like ResNet or DenseNet for potential accuracy improvements. | ðŸ‘€ T |
|------|------|-----------------------------------------------------------------------------------------------|------|
| ðŸ’¡ S | [ ]  | Implement cross-validation to obtain more reliable estimates of model performance.            | ðŸ‘€ T |

* Legend
 
| **Type** | **Meaning**               | **Status** | **Meaning** | **User Status** | **Meaning** |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸš€ T   | Title                   | [ ]      | TODO      | ðŸ‘€ T          | To see    |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ”Ž H   | Hypothesis              | [x]      | DONE      | âŒ R          | Rejected  |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸŽ¯ G   | Goal                    |          |           | ðŸ‘ A          | Accepted  |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ M   | Milestone               |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“‹ T   | Task                    |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ› ï¸ T   | Tool (as Justification) |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“Š D   | Data (as Justification) |          |           |               |           |
|--------|-------------------------|----------|-----------|---------------|-----------|
| ðŸ“Œ J   | File as Justification   |          |           |               |           |
```

## Project Management Mermaid Example
``` mermaid
graph TD
    subgraph Legend
        Z1[Todo]:::todo
        Z2[In Progress]:::inProgress
        Z3[Done]:::done
        Z4[Directory]:::directory
    end
    subgraph Project Structure
    subgraph PD[Project Description]
        PJNAME[Project Name]:::done
        PJGOALS[Goals]:::done
    end
    subgraph PDIR[Project Directory]
        Root["\/workspace\/projects\/000-sample-project"]:::directory
        Config[config/]:::directory
        Data[data/]:::directory
        Scripts[scripts/]:::directory
        Results[results/]:::directory
        Resources[resources/]:::directory
        Env[.env/]:::directory
        Git[.git/]:::directory
        Requirements[requirements.txt/]:::directory
        Log[Log.txt/]:::directory
        PM[project_management.mmd]:::directory
    end
    end
    subgraph Execution Flow
    subgraph Step
        D[Compile Context]:::done
        E[Generate Elisp]:::inProgress
        F[Execute Elisp]:::todo
        G{Success?}:::todo
    end
    subgraph "Logging, Version Control, and State Update"
        H[Log Success]:::todo
        I[Log Error]:::todo
        J{Milestone?}:::todo
        K[Git Commit]:::todo
        L[Log Only]:::todo
        M{Goal Met?}:::todo
        N[Update Project_States]:::todo
    end
    end
    subgraph PMFLOW[Project Management Flow]
        MS1[Milestone 1]:::done
        MS2[Milestone 2]:::inProgress
    subgraph Tasks M1
        T1[task1]:::done
        T2[task2]:::done
    end
    subgraph Tasks M2
        T3[task1]:::done
        T4[task2]:::todo
    end
    end
    Start[Start]:::starttag --> PD
    PD --> PDIR
    PM --> PMFLOW
    PMFLOW --> PM
    PDIR --> D
    D --> E --> F --> G
    G -- Yes --> H
    G -- No --> I
    H --> J
    J -- Yes --> K
    J -- No --> L
    K --> M
    I --> L
    L --> M
    M -- No --> N
    N --> Root
    M -- Yes --> End[End]:::endtag
    PJGOALS --> PMFLOW
    MS1 --> T1
    MS1 --> T2
    MS2 --> T3
    MS2 --> T4
    classDef starttag fill:#cce5ff,stroke:#333,stroke-width:2px;
    classDef done fill:#9f9,stroke:#333,stroke-width:2px;
    classDef inProgress fill:#ff9,stroke:#333,stroke-width:2px;
    classDef todo fill:#fff,stroke:#333,stroke-width:2px;
    classDef directory fill:#efe,stroke:#333,stroke-width:1px;
    classDef endtag fill:#fcc,stroke:#333,stroke-width:2px;
    class Root,Config,Data,Scripts,Results,Resources directory;
```

## Mermaid Rendering Script
``` shell
#!/bin/bash
# -*- coding: utf-8 -*-
# Timestamp: "2025-05-08 17:29:10 (ywatanabe)"
# File: ./project_management/generate_mermaid_images.sh

THIS_DIR="$(cd $(dirname ${BASH_SOURCE[0]}) && pwd)"
LOG_PATH="$THIS_DIR/.$(basename $0).log"
touch "$LOG_PATH" >/dev/null 2>&1

# generate_mermaid_images.sh
# Author: ywatanabe (ywatanabe@alumni.u-tokyo.ac.jp)
# Date: 2025-05-08

LOG_FILE="$0.log"

mmd2images() {
    local path_mmd=$1
    local base_name=${path_mmd%.mmd}
    local path_svg="${base_name}.svg"
    local path_png="${base_name}.png"
    local path_gif="${base_name}.gif"

    # Step 1: Ensure mermaid file is in TD (top-down) format
    echo "Checking if Mermaid file is in TD format..."
    if ! grep -q "^graph TD" "$path_mmd"; then
        echo "Warning: Mermaid file is not using TD (top-down) format."
        echo "Converting to TD format..."
        sed -i 's/^graph \(LR\|RL\|BT\)/graph TD/' "$path_mmd"
    fi

    # Step 2: Convert MMD to SVG (high resolution)
    echo "Converting ${path_mmd} to SVG..."
    mmdc -i "$path_mmd" -o "$path_svg" --backgroundColor white

    # Step 3: Convert SVG to high-res PNG with reasonable size
    echo "Converting ${path_svg} to high-res PNG..."
    convert "$path_svg" -quality 100 -background white -flatten "$path_png"

    # Step 4: Convert PNG to GIF
    echo "Converting ${path_png} to GIF..."
    convert "$path_png" "$path_gif"

    # Output success message
    echo "Created: $path_svg"
    echo "Created: $path_png"
    echo "Created: $path_gif"

    # Return the paths to the created files
    echo "$path_svg $path_png $path_gif"
}

usage() {
    echo "Usage: $0 [-h|--help]"
    echo
    echo "Options:"
    echo " -h, --help   Display this help message"
    echo
    echo "Example:"
    echo " $0"
    echo
    echo "Purpose:"
    echo " Converts progress.mmd file to SVG, PNG and GIF formats"
    echo " and ensures all diagrams are in TD (top-down) format"
    exit 1
}

main() {
    while [[ $# -gt 0 ]]; do
        case $1 in
        -h|--help) usage ;;
          -) echo "Unknown option: $1"; usage ;;
        esac
    done

    # Get the directory where this script is located
    local script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

    # Set the path to the Mermaid file
    local mermaid_file="${script_dir}/progress.mmd"

    # Check if the Mermaid file exists
    if [[ ! -f "$mermaid_file" ]]; then
        echo "Error: Mermaid file not found: $mermaid_file"
        exit 1
    fi

    # Check if mmdc command is available
    if ! command -v mmdc &> /dev/null; then
        echo "Error: mmdc command not found. Please install @mermaid-js/mermaid-cli:"
        echo "npm install -g @mermaid-js/mermaid-cli"
        exit 1
    fi

    # Check if convert command is available
    if ! command -v convert &> /dev/null; then
        echo "Error: convert command not found. Please install ImageMagick:"
        echo "sudo apt-get install imagemagick # Ubuntu/Debian"
        echo "brew install imagemagick # macOS with Homebrew"
        exit 1
    fi

    # Generate the images
    echo "Generating images from Mermaid diagram..."
    mmd2images "$mermaid_file"

    echo "Successfully generated SVG, PNG and GIF from Mermaid diagram."
    echo "SVG: ${mermaid_file%.mmd}.svg"
    echo "PNG: ${mermaid_file%.mmd}.png"
    echo "GIF: ${mermaid_file%.mmd}.gif"
}

{ main "$@"; } 2>&1 | tee "$LOG_FILE"

# EOF
```

## Your Understanding Check
Did you understand the guideline? If yes, please say:
`CLAUDE UNDERSTOOD: ~/.claude/guidelines/guidelines_project_management_rules.md`

<!-- EOF -->